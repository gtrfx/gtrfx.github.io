---
layout: post
title: "Kemper의 rig file을 읽어보자..."
---

그동안 여러 가지 rig file을 읽어가며 플레이도 해보고 DI track 을 플레이도 해봤는데, rig file을 배포했던 원작자들이 녹음한 소리에 비해서 명료도가 떨어지고 저음이 너무 부각되는 느낌을 강하게 받다보니 알고리즘 구현에 문제가 있는 것인가 고민해오다가 이번엔 전면적으로 rig file을 parsing해 봤다.다양한 rig file 중에 가장 많이 배포되어있는 4kB의 rig file을 parsing했는데, 이것의 특징은 주로 앰프의 특성 - 프리앰프의 왜곡 특성과 캐비넷 응답 특성 - 을 담고 있는 것이다. 6kB짜리 rig file의 경우에는 stomp box model에 대한 다양한 parameter들을 담고 있고 amplifier에 대한 특성 데이터는 상대적으로 비중이 작고 어떻게 encoding 되어있는지 아직 확인하지 못했다.어쨋든 앰프의 프로파일링 데이터 말고도 amplifier에 영향을 미치는 대 여섯개의 parameter도 rig file에 포함하고 있다. 열거 해 보면 - power sagging - definition - clarity - gain - pick - compressor - tube shape - tube bias정도가 되겠다.여기서 definition이 가장 중요한 영향을 미치지 싶다. 이 값도 profiling시에 측정되어 선택되어지는 값이라고 하는데, reference manual의 설명은 다음과 같다.--------The “Definition” parameter controls the characteristic fingerprint of the preamp. The profiling process automatically sets “Definition” to a value that represents the reference amp. You could, for example, use it to modernize the Profile of a vintage amp without having to use additional stomps. Alternatively, start with a Profile of a modern tube amp, and use “Definition” to give it a more vintage sound when driven into distortion. You can also use “Definition” to align the sound of your guitar to the sound of your amp, if required. Don’t be afraid to keep experimenting until you get the balance that sounds best to you.Vintage amps distort the lower harmonics in the guitar signal which gives them their bluesy sound. These amps were originally designed to deliver a clean sound, so to achieve a creamy distortion, these amps need to be driven by a typical transistor-based device like a treble booster. Modern tube amps use a different approach, in which the higher overtones of the guitar strings are the driving force for the distorted sound. The expensive boutique amps take this concept one step further, by providing an extreme level of top-end frequencies and a large dynamic range. The distortion has a sparkling quality to it, and preserves every nuance of the strings and pickups. Together with the characteristics of the actual speaker, the individual distortion behavior creates the fingerprint that identifies the amplifier.---------앞서 언급했던 문제 상황 (톤이 너무 어둡고 명료하지 못함)에 직접적으로 연관되는 값인데, 앰프의 응답 특성은 이미 프로파일링시에 측정을 했을텐데 왜 이 값을 독립적으로 두어 관리를 하는가에 대한 문제가 대두되는 것이다. 전기 회로라든가 필터 설계를 하는 입장에서 몇 가지 용어를 선택해 설명하였다면 이리 길 필요가 없을텐데, 그렇게 하면 사실상 별로 한 게 없어보일지 모르니 이렇게 길게 설명한 게 아닐까 하기도 하고, 음악 하는 사람들을 상대로 물건을 팔아야 하다보니 이렇게 얘기를 하고 있는가 싶기도 하다. 여하간, definition이란 값을 변화시키면 다음과 같은 효과를 얻는다고 요약할 수 있을 것 같다. - 프리앰프와 관련된 값이다. - 프로파일링 프로세스 상에서 적당한 값을 찾아준다. - 빈티지 앰프를 모던 앰프로 바꿔준다거나 모던 앰프를 빈티지 한 앰프처럼 만들어 줄 때 사용할 수 있다.  - 내 기타의 특성에 맞게 앰프의 사운드를 변화시킬 때도 쓸 수 있다.아마도 프리앰프를 만들어 봤다거나 기타와 앰프의 관계에 대해서 경험이 많다면, 이것은 기타의 출력 임피던스와 앰프의 입력 임피던스 관계에서 오는 톤 깎임 (주로 저음 깎임)과 관련된 필터와 관련된 파라미터를 의미함을 알 수 있다. 즉, 다시 해석하면 다음과 같아질 것이다. - 프로파일링할 때 KPA는 낮은 출력 임피던스로 reference amp (프로파일링 되는 앰프)를 프로파일링 하게 되므로, 입력단에서 톤깎임이 거의 없이 프로파일링이 된다. - 실제의 기타는 출력 임피던스가 주파수에 따라 점점 커지는 성질을 가지고 있어서, 앰프가 전달 받는 신호는 원래의 음에서 고음이 깎여 나간 신호를 받게 된다. 앰프의 입력 임피던스가 클 수록 고음을 더 잘 받아들이게 되고, 반대로 작으면 고음이 깎여나가는 정도가 커진다. 설계자는 이것을 vintage vs. modern amplifier의 차이로 해석한 것으로 보여진다.  - KPA에 기타가 연결될 때에는 KPA의 입력 임피던스가 매우 클 것이므로 (수 meg ohm) 기타로부터 대부분의 고음을 전부 다 전달 받게 된다.결국 definition의 값은 고음이 얼마나 잘 전달되느냐와 관련된 filter parameter라 볼 수 있겠다. 즉, 고음이 부각되는 만큼 저음의 비중이 상대적으로 줄어든다는 것을 의미하므로, definition을 올려주게 되면 중 고역이 살아나면서 소리가 더 또렷해지고 반대로 내려주게 되면 고음이 줄어들어 답답한 소리가 나게 될 것이다. 일반적으로 이 특성은 filter의 cut-off frequency를 바꿔주는 식으로 가게 되고 order는 잘해봐야 1일 것으로 본다. 아래 링크를 열어보면 Ola가 친절하게 각종 파라미터들을 잘 테스트 해주었기에 확인이 가능하다.https://youtu.be/Hr2AFJZoRuU

