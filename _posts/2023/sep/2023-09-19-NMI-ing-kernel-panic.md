---
title: "NMI-ing kernel panic.."
tags: [macos]
layout: post
author: "Keith"
---

정품 맥을 쓰는 사람들도 이런 에러를 경험한다고도 하고 대부분은 해킨 세상에서 발생하는 커널패닉이지 싶은데, 적어도 일주일 동안 이 커널 패닉 때문에 고통 받았다.

내가 뭘 잘못했는지 모르겠는데 kernel panic이 뜨면 제법 자세한 리포트가 마련되는데, Ventura에서는 어느 함수에서 문제가 생겼는지 제대로 잘 보여주지 않았다. 

NMI는 non maskable interrupt라고 해서 interrupt의 최상급이라고 볼 수 있다. 아무리 바쁜 일을 하고 있다고 하더라도 1착으로 응답해야 하난 그런 인터럽트이다. 이게 제때 응답이 안되어서 time out이 났다는 것이다. 

이러한 경우 원인은 대개
- load가 너무 커서 CPU thread가 제대로 응답을 못했다: 가능성 희바ㄱ
- board의 chipset이 과열되어 문제가 발생했다: 가능성 희박
...

그래서 강제로 할 수 있는 것은 다음을 boot args에 추가하는 것이다. 강제로 타임아웃을 무시하는 옵션이라는데 나에겐 별 도움이 안되었다.

tlbto_us=0 vit=9

결국, 인터넷을 돌다보니 ALC쪽에서 에러가 나면서 죽은 경우가 보이길래 어설프게 설정된 AppleALC를 날려버렸다. 뭔가 예감이 좋다.

안정성 확인을 위하여 여러 날 켜두고 있는데 여전히 커널 패닉 없이 잘 돌아가고 있다. 이렇게 고질적인 문제 해결.

