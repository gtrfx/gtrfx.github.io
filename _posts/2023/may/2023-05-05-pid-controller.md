---
title: "PID controller...가 뭘까?"
tags: [automatic control systems, PID]
layout: post
author: "Keith"
---

PID controller에 대해서 학교를 졸업하고 이렇게나 오랜 뒤에 일종의 일상(?)용어로 듣게 된 것에 놀라지 않을 수 없었다. 그것도 젼혀 상관없을 것 같은 곳에서.

그렇다 에스프레소 머신에 대해서 이야기하면 나오는 게 PID 컨트롤러다. 정확히 말하면 에스프레소 머신의 물온도를 PID controller로 제어한다는 뜻이다. 이게 일종의 용어가 된 것은 저가 머신에 PID controller를 붙여서 온도제어를 할 수 있게 되었지 때문이지 싶은데, 어쨌든 중요한 것은 PID 컨트롤러로 온도를 컨트롤 한다는 것이고 컨트롤러가 그것이 충분히 잘 설정되었다고 하면 매우 빠르게 그리고 매우 안정되게 뭔가를 컨트롤 한다는 것이다. 

PID controller라는 것은 (에러에 대해) proportional + integral + derivative한 성질을 모두 가지고 있는 컨트롤러라는 의미다.

이게 무슨 소리인가? 

컨트롤러라는 것은 어떤 것을 내가 원하는 상태로 만들어 버리는 장치라고 이해할 수 있다. 이를 위해서 우리는 내가 원하는 상태와 현재상태를 비교하게 되는데, 그 차이를 흔히 '에러(error)'라고 한다. PID controller는 이 에러를 기준으로 동작한다.

#### proportional controller

proportional controller라 함은 에러에 비례하여 뭔가를 작용시키는 컨트롤러라는 의미다. 우리가 컨트롤러를 가지고 물 온도를 제어한다고 하면, 이 시스템은 목표 온도와 실제 물의 온도의 차이 = 에러를 가지고 뭔가를 하게 된다. 이를테면 섭씨 물온도 에러에 대해서 3을 곱한 값만큼 전압을 적용시키겠다고 하면 그것은 P-controller가 된다.

이 컨트롤러는 현재의 에러값에 곧바로(거의 동시에) 제어값이 적용되는 제어기란 의미다. 아직까지 잘 감이 안온다.

#### integral controller

이것은 에러의 누적값이 컨트롤러 출력에 반영된다는 이야기다.

#### derivative controller

이것은 에러의 미분값이 컨트롤러 출력에 반영된다는 이야기다.

대충 종합하여 보면 컨트롤러의 출력이 에러에 대한 미분방정식으로 표현된다는 소리이기도 하고 전자부품으로 놓고 보면 R/L/C가 조합된 회로인 것처럼 해석될 수도 있고 그런 거다.

일반적으로 어떤 것에 대한 누적값을 가지고 다룬다고 하면 그것의 응답이 생각보다 느리고 완만하고 지체되어있다고 할 수 있다. 또 어떤 것에 대한 미분값을 가지고 다룬다고 하면 순간적인 기울기를 계산해서 움직인다고 할 수 있으니까 매우 급진적인 상태라고 볼 수 있다. PID 제어기는 이러한 요소들을 반영해서 너무 급진적이지도 않고 너무 느리지도 않고 적당히 빠르게 뭔가를 제어할 수 있게끔 만들어진 제어기라는 이야기다.

제어기가 어떤 식으로 설계되는 것이 가장 바람직하냐는 것은 그것이 제어하게 될 어떤 시스템의 응답함수에 따라 결정되는 것인데, 일반적으로는 에러의 크기를 관찰해서 실험적으로 최적화하는 것이 일반적이다. 혹은 마이크로 컨트롤러를 하나 두고 원하는 에러 커브가 나오게끔 PID 요소를 최적화하기도 한다. 
