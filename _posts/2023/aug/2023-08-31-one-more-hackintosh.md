---
title: "또 한번 해킨을 하게 될 줄이야.."
tags: [hackintosh, ryzen]
layout: post
author: "Keith"
---

업무용으로 컴퓨터를 한 대 주문하게 생겼는데 가성비를 따져보자니 또 x86 PC를 사야될 지경이고 그래서 OS를 설치하자니 Linux아니면 MacOS인데 직접 작업 하는데 사용하려고 보니 해킨을 할 수 밖에 없게 되었다. 물론 linux dual boot을 할 수도 있지만 그건 그때 가서 생각할 노릇이고.

M2 Ultra를 생각해봤는데 어차피 GPU 기능도 안쓰고 CPU 기능만 사용하려는데 이리 저리 재봐야 x86 PC의 가성비를 당할 길이 없다. 물론 부피도 쓸데 없이 크고 전력소비도 많은데다 시끄럽기까지 하니까 오직 가성비를 빼면 MacStudio와 비교할 뭔가가 별로 없다. 더구나 RAM access가 굉장히 빠르기 때문에 이런 것이 중요한 애플리케이션에 있어서는 분명히 나은 성능을 보장하지만, 내가 조립하지 않고 누군가에게 비용을 들여 조립해달라고 하는 조건으로 비교 해도 24core의 M2 ultra Mac Studio는 7950x3d PC 두 대를 조립하고도 남는 가격인거다. 쓸만한 GPU를 달고도 말이다. 

좀 웃긴게 24 core를 쓰면 분명히 16 core 32 thread 머신보단 빠르지 않을까 싶은데 그렇지 않다는 거다. 내가 사용하려는 애플리케이션은 싱글코어 속도가 빠르면 좋은데 multithreading도 잘 되면 좋은 그런 거라 가성비를 따지고 보자면 사실상 선택의 여지가 없다. 과거 라이젠 해킨토시 사용 경험으로 보건데 MacStudio와의 체감성능은 분명히 제법 날 거라고 본다. 미려한 외관과 조용하고 성능에 비하면 매우 낮은 소비전력 (그래서 열도 거의 없는)의 물건과 전원 스위치를 누르기가 무섭게 굉음을 (요샌 쿨러가 많이 좋아져서 제법 조용해지긴 했지만) 내는 물건과는 엄연히 다르다. 최근의 소프트웨어들은 M1/M2에 보다 최적화된 느낌이라 단순히 CPU 성능만 볼 게 아닌 큰 차이가 나지 싶다만. 

그도 그럴 것이 7950x3d의 benchmark는 windows에서 더 좋다. 신기하게 linux나 MacOS에서가 아니라. 그 이유를 좀 알면 좋을 것 같은데, 잘은 모르지만 CPU의 clock cycle을 컨트롤하는 table이 뭔가 최적화 되어있어서 그런 것이지 어렴풋이 추측할 뿐이다. Ryzen 자체가 Mac 정식 제품 상에서는 존재하지 않는 물건이고 몇 가지 트릭을 사용해서 돌리는 것이니까 말이다.

신기하게 compiler 상에서 어떤 constraint를 가하지 않아도 아무 문제없이 잘 돌아가는 binary를 만들 수 있다는 것은 참으로 신기한 일이다. 

또 하나 Ryzen CPU에서 MacOS를 굴릴 때의 문제점 하나가 virtual machine/docker를 쓰기 좋지 못하다는 것이다. 이것은 그냥 포기하는 게 정신 건강상 좋다. 내 경험상 분명히 가능은 하지만 해당 VM이 intel CPU를 가정해서 만들어진 것이라 최적의 효율을 뽑을 수 없다. 그냥 멀티붓을 쓰는 것이 훨씬 나은 결정이다. 요새 SSD도 매우 싸졌으니까 정신건강을 위해 살짝 투자하는 것 나쁘지 않다고 본다.

그런데 왜 Ryzen을 구입해서 해킨하느냐는 말을 할 수 있을 것 같다. 글쎄. 그냥 인텔 CPU가 싫다. 13900k의 이상한 구조도 별로 맘에 안들고. 뭔가 문제가 생길 것 같고. 성능도 7950x3d가 더 낫다고 알려져있으니까. 인텔 CPU에만 특화된 것들 (Adobe PS, Docker, VM...)만 사용하지 않으면 된다. 