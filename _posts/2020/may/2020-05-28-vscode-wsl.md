---
title: "vs code + WSL"
tags: [WSL, git]
---

윈도우즈에서 WSL을 쓰게 되면 사실 윈도우즈 전용으로 git이니 하는 것들을 설치해야 할 이유가 없다. 더구나 Visual Studio처럼 덩치가 큰 컴파일러를 필요로 하지 않는 경우에 훨씬 더 가볍고 파워풀한 gcc/g++을 설치해놓으면 된다. 이럴 때 vs code로 편집 작업을 해야한다고 할 때 WSL와 윈도우즈 사이를 오가는 것이 사실 좀 불편하다. 가장 큰 것이 path가 일치하지 않는다는 것인데, vscode는 extension으로 이 문제를 해결 했다.

어떻게 하느냐?

vs code에 WSL 용 플러그인(extension)을 가져다 설치한다.

그 다음 wsl로 가서 "code ."로 해서 code를 부른다.

그러면 wsl의 리눅스를 이용해서 wget으로 vs code server(?)라는 것을 설치하고 그것이 윈도우즈에 설치된 vs code를 마치 리눅스에서 띄운양 동작하게 해준다.

그러면 make라든가 git이라든가 그외에 다양한 소프트웨어들을 윈도우상에 설치할 필요 없이 wsl안에 있는 리눅스에 설치해놓으면 vscode가 알아서 

WSL이 docker처럼 동작하지만 사실 docker처럼 기민하진 않고, 그렇지만 동작속도는 대단히 빨라서 참 좋다. WSL2로 오면서 WSL에서 응용 프로그램을 동작시키면 윈도우즈상에서는 VMMEM이란 프로세스가 뜬다. 또 자신의 파일 시스템을 vmdk라는 가상 드라이브 파일로 만들어놓는다. 사실 그전엔 일반 윈도우즈 파일들과 별 다름없이 되어있었는데 (그래서 편했는데) permission의 문제가 있어서인지 그렇게 만들어버렸다.

여기서 한가지 궁금증이 생기게 된다. WSL1대비 WSL2 속도가 어떻게 되었냐고?

WSL2에 와서 빨라졌다는 사람이있고 그렇지 않은 사람들이 있는데, 파일 시스템이 가상시스템으로 되면서 속도가 빨라진 것이 체감된다. 그냥 벤치를 돌리면 사실상 큰 차이를 느낄 수 없다. 벤치 점수는 그때 그때 조금씩 다르기 때문이기도 하다.

분명히 최근 버전의 linux native한 상태보다 약간 느리다. 그래도 윈도우즈에서 돌아가는 qemu보단 빠르다. WSL2에서는 docker도 돌릴 수가 있다. systemd는 이상하게 잘 안도는 것 같다. WSL1에서는 원래 안됐지만 WSL2에서 이걸 가능하게 했다는 이야기가 있는데, yuk7이 풀어놓은 arch linux에서는 잘 안된다.

이게 머리만 좀 잘 쓰면 docker처럼 쓸 수가 있다. docker처럼 개개의 container에 NIC를 붙인다거나 해서 저희들끼리 연결되고 그런 식으로 네트웍 서비스를 테스트하거나 하는 식으로는 쓰기 어렵다 치더라도 linux의 배포판과 버전을 까다롭게 따지는 상용 s/w를 윈도우즈 위에서 돌리는 것은 가능하다.   

사실 상용이 아닌 오픈소스 소프트웨어들은 최신 리눅스위에서는 더 날개단듯이 빠르게 돌아가는데, 세상이 바뀌니 가장 빠르고 좋아야 할 상용 소프트웨어들의 수준이 참 한심스러워졌다.