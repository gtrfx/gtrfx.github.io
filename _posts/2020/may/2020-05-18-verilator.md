---
title: "집에서 verilog하기"
tags: [verilog, verilator]
---

verilog를 재미로 하고 있는 중이다. 틈나는 대로 잠깐 씩. 왜? 머릿속에서 사고의 패턴을 좀 바꿔보고 싶은 생각이 있어서.

실제로 내 주위의 흐름과 변화를 이해하는데 많은 도움을 받고 있다. 

이걸 먼저 가능하게 하려면 집에서 verilog를 할 수 있는 환경을 마련해야 하는데, verilog는 사실상 좋은 통합환경이란 게 없다.

eclipse 정도 쓰면 다행이고, visual studio code를 좀 쓸 줄 알면 이것과 다른 verilog compiler를 붙여서 쓰면 된다.

대충 경험해 본 바를 적어보면,

1) 상용 툴 사용하기

  대개 개인이 verilog compiler라든가 그외의 rtl 개발 툴을 가지고 있지는 않다보니, 회사에서 받아놓은 license를 이용하는 방법이 있다. 

  - vnc로 들어가서 하기: vnc로 작업하는 것은 한국처럼 네트웍 속도가 어마무시하게 빠른 곳을 빼면 매우 답답해서 사용하기 불편하다. 신기하게 그냥 콘솔 작업을 하더라도 echo가 돌아오는데 시간이 제법 걸리니까 답답함을 느껴서 일하기가 싫어진다. 여기엔 답답한 VPN처리 속도도 한몫한다고 본다. 
  - terminal로 들어가서 X로 띄워서 작업하기: vnc로 작업하는 것보다 약간 낫긴 한데, 여전히 답답하다. 리모트로 작업하면 생각보다 창하나 띄우는데 많은 시간이 든다. VPN 및 tunneling S/W에서 까먹는 시간 때문이라고 본다.
  - 모두 내 PC에 설치하고 license만 가져다 돌리기: license를 확인하는데 대충 3초 정도의 시간이 걸린다. 어쩌다 한번씩 실행하는 것이면 상관없는데, 별 것도 아닌 compiler 돌리는데도 이 지경이면 이것도 상당히 답답함을 느끼게 된다.

2) icarus verilog/verilator

icarus verilog는 나름 편리한 툴이긴 한데, simulation 속도가 대단히 느리다. 또 (system)verilog 문법에 별로 강하지 않아서, 다른 컴파일러에서 에러가 발생하는 것도 아무 문제없이 넘어가고 시뮬레이션까지 되는 문제가 있다. 같은 verilog project로 실험해보면 대충 상용툴의 1/100 정도도 안되는 속도로 돌아가는 것처럼 보인다. 

verilator는 컴파일/시뮬레이션 속도가 대단히 빠르다. C++/system C와 붙여서 작업한다고 보면 이게 상당히 괜찮은 방법처럼 보인다. simultion 속도는 정말 어마무시하게 빠르다. vcs와 비교하면 license를 확인하는 시간이 들지 않고 open source인데다 최신 gcc/g++로 빌드해서 돌게 되니까 엄청나게 빠른데, simulation은 multi-thread까지 허용하니까 훨씬 더 빨라진다. arch linux 에서는 별도로 빌드하지 않아도 최신 패키지로 늘 가져다 쓸 수 있다. 

문제는 test bench를 전통의 systemverilog라든가 verilog로 짜놓고 쓰기보단 C++/systemC를 이용해서 돌리게 되어야 하는 차이가 생긴다. 그러니까, 검증팀이 C++/SystemC에 더 친화적이라면 이 편이 훨씬 더 유리할 수 있다.

대충 결론을 내려보자면,

집에서 취미로 뭔가 빨리 빨리 배워나가기엔 verilator가 가장 좋은 솔루션으로 보인다. 다만 그 검증방법이라든가 검증 형식이 메이져 개발사들이 하고 있는 방법이 아니라 구직활동을 할 때 별 도움이 되진 않는 듯 하다. 잡 마켓에서는 UVM + Systemverilog를 잘하는 사람들을 좋아하니까 그렇긴 하다. 