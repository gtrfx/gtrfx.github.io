---
title: "Hackintosh에서 surround audio"
tags: [AppleALC, macOS]
---

갑자기 옛날 영화들을 5.1채널로 볼까하는 생각이 들어 시도해보았다.

요샌 컴퓨터가 좋아져서 구태여 DTS/Dolby AC3 디코더를 밖에 두어야 할 이유가 없고 더구나 고출력의 앰프는 이제 필요없는 시대이다보니까 PAM8403 두 개로 때울 생각이다. 서브우퍼는 좀 파워가 많이 요구되고 저음에 몰려있기 때문에 파워가 좀 필요할 것 같은데 그냥 스피커만 6-8인치급만 써도 저음은 충분히 강하게 들린다. 집을 울려야 할 이유는 없으니까 그렇게 보면 센터와 서브우퍼 채널은 쓰지 않아도 될 것 같다. 일단 처음엔.

이미 대부분의 컴퓨터의 마더보드에 realtek audio chip이 붙어나오는데 대부분 5.1 (실제 6채널), 7.1 (실제 8채널)이 모두 지원된다. 오디오 칩은 사실 매우 유니버설하게 만들어져서 모든 포트가 설정에 따라서 입력 핀도 출력 핀도되고 routing도 자유자재라 어느 포트로든 front/mid/rear/center/LPF 채널로 설정할 수 있다. 그래도 어느 정도의 룰은 있어야 되니까 그것은 소프트웨어 드라이버/설정 프로그램이 적절히 제한을 가하는 것으로 되어있다. 그런데 이것은 어차피 윈도우즈를 타겟팅한 것이라 해킨토시에서는 내맘대로 그렇게 포트를 설정할 수 없다.

그런데 왜 윈도우즈가 아닌 해킨토시에서 하려고 하느냐 라는 질문을 받을 수 있다.

Audio & MIDI util을 보면 MacOS에서는 오디오 포트 구성을 매우 자유롭게 할 수 있게 되어있다. Aggregate device라고 해서 설정하면 꼭 한 가지의 오디오 카드만 아니라 여러 개의 오디오 인터페이스를 통해서 다양한 채널 구성의 출력도 가능하다. 윈도우즈에서 이런 경우는 생각해볼 수 없다. 사운드 설정이란 것도 온전히 제조업체의 드라이버에 따라가야 하고 그러한 멀티채널 출력이 지원되는 소프트웨어도 정해져있다. MacOS에서는 그런 제약이 없다. 웹 브라우저를 통해서도 5.1 채널아니 그 이상의 출력도 할 수 있다. 그런 의미에서 MacOS는 컴퓨터 본연의 기능도 기능이지만 노는 기능에 있어서는 분명히 세련되고 단순화되었지만 있을 것은 다 있고 안될 것이 없는 그런 OS라고 볼 수 있다.

MacOS에서는 AppleHDA라는 드라이버에서 예전 같으면 이것을 pinout이라고 해서 관련된 설정을 하나의 테이블로 해서 파일로 가지고 있었는데 (그래서 애플 하드웨어가 아닌 하드웨어에서 쓰려면 이 파일을 추출해서 매번 재부팅해가며 편집/시험했어야 했는데), 지금은 AppleALC kext에서 모든 칩 모델 별로 layout이란 것으로 데이터베이스해놓고 있다. 그래서, 같은 칩이라고 하더라도 포트설정이 layout에 따라 결정되도록 되어있다. 데스크탑인 경우에는 대부분 그 구성이 유사한 반면, 랩탑의 경우는 포트의 개수도 다르고 핀의 구성도 달라서 어떤 것은 4핀짜리 오디오 잭으로 스테레오 오디오 출력과 마이크 입력까지 받기도 하고, dock에 연결했을 때 그쪽으로 나가는 line in/out이 별도로 되어있는 것도 있는데, 연결 포트의 구성이 제각각 다 달라서 layout을 DB화해놓은 것이다. 

내가 사용하고 있는 것은 ALC887은 그중 가장 흔한 칩 중에 하나인데, 5.1 채널 세팅에 가장 어울리는 layout은 시행착오끝에 2번으로 확인되었다. 

후면의 3개 포트는 모두 6채널의 오디오 출력으로 할당되고 전면의 2개 포트는 마이크 입력과 헤드폰 출력으로 설정되어있다. 어차피 온보드 오디오카드에 라인 입력을 한다거나 악기 입력을 하는 경우는 거의 없으니까 (아주 예전엔 했던 적이 있다만) 말이다. 

이번에 알게 된 사실인데 컴퓨터 용으로 사용하던 2.1채널 스피커를 PAM8403으로 개조해서 USB에 연결해서 썼는데, 여전히 쓰레기급의 북쉘프 스피커이지만 스피커가 없는 관계로 섞어 사용해보니 이것은 더 쓰레기라는 사실을 알았다. 

왜 쓰레기냐고?

그전엔 그래도 저음이 제법되지 싶었는데 저음이 거의 없고 (서브 우퍼 역할을 하는 놈이 하나 있다) 신기하게 분명히 좌우 신호를 따로 내보내면 각각 반응하지만 음악을 출력하면 좌우 구분이 잘 되지 않는 신기한 현상을 보여주었다. LFE 신호를 시험삼아 보내봤는데 출력이 매우 저조했는데, 그도 그럴 것이 우퍼라고 달려있는 것이 5인치?쯤 되어보이는 것이라 사실 이 물건으로 120Hz 아래의 신호를 저출력으로 재생하겠단 생각 자체가 말이 안되는 것이기도 하다. 12인치 정도의 드라이버를 달아주어야 (대충 공진을 80Hz에서 할테니까) 그럴싸한 소리가 날텐데, 여기에 귀에 제법 들릴만한 파워로 신호를 주게되면 흔히 차가 벙벙 울릴 정도로 음악을 듣는 형님들이 떠오를 정도의 진동 때문에 사실 단독주택이라고 하더라도 근거리에 이웃이 없어야 가능한 환경이지 싶다.

어쨌든 이 PC용 2.1 스피커는 안녕이다. 일단 4채널로 들어보다가 좀 부족하다 싶으면 센터하나 달아보고 하나둘씩 늘려가야지 싶다.

다음 궁금함은 일반 스테레오 음악을 어떻게 simulated surround로 감상할까 하는 것이다.
