---
layout: post
title: "Kemper Profiling Amp"
categories:
    - guitar
    - music
    - technology
---

Kemper profiling amp (KPA)은 아마도 그 가격으로 봤을 때 정말 많이 팔린 기타 이펙트/앰프/프리앰프인 것으로 판단된다. 어찌보면 참 간단한 아이디어인데 그것을 잘 상품화했고 평가를 잘 받아서 웬만한 뮤지션이며 스튜디오에서는 전부 이 제품을 구매하여 쓰고 있는 것으로 안다.

이 제품의 원가를 생각하면 정말 높은 마진율로 고 수익을 올렸을 듯 한데, 가격이 여태 초창기와 비교했을 때 큰 차이가 없다는 것을 생각하면 더더욱 재미를 엄청나게 보았을 듯 하다. 그 이후의 후속제품을 돈을 많이 들여 개발한 것도 아니고 대략적으로 프로모션하는데 들어간 비용외에 큰 것은 별로 보이지 않는다. (~~물론 실제로 어떤 일을 벌여왔는지는 알 수 없지만~~)

앰프 프로파일링의 기본적인 아이디어는 필자가 리버스 엔지니어링해 본 결과로 다음과 같이 추측이 된다.

다른 기타 앰프 시뮬레이터와 달리 이 제품은 앰프의 내부를 전혀 모르는 상태에서 외부에서 입력을 넣어 사운드의 최종 결과물 (프리앰프 - 파워앰프 - 스피커 - 마이크를 지난 결과물)에 접근하는 것이라 스스로 이것을 모사할 수 있는 모델을 가지고 있어야 되는데, 캠퍼는 이것을 이렇게 잡았다.

input - filter1 - distorter - filter2

너무 간단하지 않은가? 그렇지만 더 복잡할 수도 없다. 이미 말한 바와 같이 앰프 내부에 뭐가 있는지 알 수 없는 상황에서 순수하게 결과물을 보고 내부에 무엇이 있을까 알아맞추는 격이니까 말이다.

이 구조는 쉽게말해서 입력은 어느 정도 filter1에서 EQing을 하고 distortion을 일으킨 후에 filter2를 거치는 구조이다. 따라서 실제 앰프의 구조와는 같지 않다. 이것은 프로파일러가 알아낼 수 있는 특성의 한계에 맞춰진 것이기 때문이다.

이것들을 어떻게 알아내는지 대충 정리해보면
- fitler1
   
   음량을 매우 작게 해서 white noise, chirp signal을 넣어 보내면 filter의 윤곽을 알 수 있게 된다. 
   이렇게 해서 얻어진 결과는 distorter의 영향을 안 받은 것으로 생각해 볼 수 있으니까 filter1 * filter2의 합성이라고 볼 수 있다.
   이것은 쉽게 생각해서 프리앰프의 EQ 특성이 아닐까 생각해 볼 수 있지만 그렇지 않다. 

- distorter

   distorter는 그냥 일반적인 distorter이다. 프로파일러 입장에서는 어떠한 주파수의 신호가 어떤 음량에서 신호가 깨지는지 아닌지만 파악할 수 있다. 그런데, 그것을 그대로 distorter로 만들 수는 없다.
   distorter는 시간 영역에서 진폭이 어느 이상이 되면 그냥 무조건 distort/saturate 할 수 밖에 없다. 

   결국, filter1은 Saturation이 일어나기 전의 신호 형상으로 만들어주는 역할을 한다. 
   
   주파수와 음량을 변화시켜가며 어느 음량에서 신호가 깨져나가는지을 알아냈다고 할 때, filter1은 그 패턴의 역의 응답을 갖게 된다. 즉, 어떤 주파수의 신호가 상대적으로 높은 음량에서도 깨지지 않았다면 (distorter는 일정 음량의 신호들은 전부다 깨버리니까) 그 주파수의 신호들은 상대적으로 음량을 줄여 디스토터에 보내고 낮은 음량부터 깨진 신호들은 반대로 filter1에서 더 부스트하는 방법으로 해서 더 낮은 음량에도 깨질 수 있게 만드는 것이다.

- filter2

    filter2는 언뜻 생각하면 스피커의 주파수 특성이라고 생각할 수 있을 것이다. 그러나 실제로 그렇지 않다. 이미 언급한 바 대로 낮은 음량의 신호를 넣었을 때 우리는 filter1*filter2를 얻고 신호가 찌그러지기 시작하는 지점의 음량을 토대로 filter1의 역패턴을 얻게 되니까 그것으로 filter1을 얻고, 앞서의 non-distorted signal에 대한 freq response에서 filter1을 제거해서 filter2를 얻게 된다.

    그러나, 신호가 깨져나갔을 때 그 결과물이 white noise에 가까운 모양새가 될 수 있다고 보면 filter2가 사실상의 speaker의 freq response라 볼 수도 있을 것이다.


그래서, 실제로 구현은 

1st FFT filter - saturator - 2nd FFT filter

의 형태가 된다. 디지털 이펙트 치고는 구성이 너무 간단한데, 더 복잡하게 할 수도 없다. 확실하지 않은 것으로 알 수 없는 것을 흉내내는 것은 artifact만 더할 뿐이기 때문이다.

여기서 FFT filter라고 한 것은 FFT로 얻어낸 필터의 주파수 특성을 반영하는 필터라는 뜻이다. 여기서는 filter의 convolution 과정을 FFT로 대체시킨 것이라고 봐도 되고.

이러한 리버스 엔지니어링을 통해서 필자가 제작한 AU plugin이 rig-player이다. 이름 그대로 kemper의 rig을 읽어서 KPA처럼 동작하게 하는 AU plugin이다.


