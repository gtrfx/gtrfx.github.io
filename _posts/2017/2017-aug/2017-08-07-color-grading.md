---
layout: post
title: "Color Grading"
categories: photos
---

## 개요

Color grading이라고 하는 말은 디지털 영상의 컬러 레벨을 조정하는 일이라고 이해할 수 있다. 흔히 우리가 디지털 카메라로 사진을 찍고 레벨을 조정하는 일들을 하는데, 그 목적은 촬영한 사진을 보다 또렷하고 좋은 색감/밝기로 보기 위해서라고 이해할 수 있다.

대개는 맹목적으로 포토샵 같은 데서 오토레벨을 먹인다거나 오토컨트라스트 같은 것을 먹여버리는 것처럼 동영상에도 같은 일을 한다고 하면 편할텐데, 중요한 것은 화면에서 무엇을 보여주려 하는가 어떤 느낌을 내고 싶어하는가이기 때문에 단순히 오토 레벨을 할 수 없다는 이유가 있다.

디지털 세계로 옮겨가게 된 이후로 영화나 드라마나 전부 전문가가 영상을 처리하기 때문에 이런 부분에 있어서 우리처럼 일반 사람들이 손대야 할 필요가 있을까 싶은데, 생각외로 지금처럼 영상처리가 발달되기 이전의 영상들 (대략 2000년대 중반 이전)은 생각보다 훨씬 더 형편없는 것을 알 수 있다.

아마도 돈이 나오지 않는 컨텐츠라 생각해서 필름을 그대로 디지타이징 했을 수도 있고, 디지털 미디어로 만들어놓은 영상이라도 별도의 색조정을 거치지 않고 풀었을 수도 있을테니까. 그런 이유로 멀쩡한 소스임에도 불구하고 색감이나 분위기가 빛 바랜 필름처럼 칙칙하기 그지없는데, 70년대 혹은 그 이전으로 내려가더라도 필름으로 촬영된 영상들은 생각보다 매우 훌륭하다. 필름이란 매체 자체가 이미 그 이전에도 영상정보를 큰 손실 없이 잘 보관하고 있었다는 말이다.

따라서, 어느 정도 컬러 그레이딩을 해주면 세월의 차이를 거의 느낄 수 없는 수준의 영상을 보여준다. 물론 사람이나 복장, 주위 환경의 변화가 세월의 흐름을 느끼게 해주긴 하지만, 영상자체가 물빠진 분위기로 칙칙하게 흐르진 않는다는 말이다.

## 원리가 뭔가?

내 경우에는 동영상을 찍어놓으면 이상하게 그 색감이나 전체적인 분위기가 스틸 사진과 다르고 맘에 들지 않아서 찾아보다 알게 된 것인데, 유튜브에 관련된 영상들이 많이 있긴 하지만 그 원리에 대해서는 뚜렷하게 언급하는 것들은 없다. 어떤 방법으로 컬러 그레이딩을 하면 된다하면서 예제를 보여주는 것들이 대부분이니까. 차라리 카메라가 알아서 해주었으면 좋겠는데 너무 그런 식으로 하면 또 사용자가 해야할 일도 없고 자유도가 떨어져버리니 더 그러하다고 할 수 있겠다.

원리를 아주 짧게 요약하면, 영상의 밝기 혹은 레벨 분포를 조정하는 일이다. 어떻게 조정하냐고? 일종의 curve를 만들어내서 원래 영상의 RGB 값을 새로운 값으로 매핑하는 것이다. 이것을 결정하는 것은 영상처리 소프트웨어마다 다 다르지만, 근본원리는 다르지 않다. 새로운 함수를 설계해서 그 함수에 R/G/B 값을 넣고 그 결과를 새롭게 쓰는 것이다.

모니터를 쳐다보는 사람의 눈에 가장 괜찮게 보이는 그런 영상이 나오도록 조작하는 것이라 특별히 기술이 있다고 생각하지 않는다. 사용하는 툴에 익숙해지고 자신의 눈에 가장 멋지게 나오면 그만인 것이다. 중요한 것은 이렇게해서 분포를 조정할때 너무 어두운 부분 혹은 밝은 부분을 날려버리게 되면 이후에 재조정은 불가능하다는 것이다. 

그런 이유로 카메라에서는 되도록이면 센서가 받은 거의 모든 밝기에 대해서 전부 기록이 될 수 있도록 레벨을 압축하는 커브를 사용하여 녹화하려고 하고, 그렇게 된 원본으로부터 필요에 따라 영상을 다르게 컬러그레이딩 하게 된다. 이를테면 어두운 곳을 최대한 날려버리고 밝은 부분만 부각한다든가 아니면 밝은 곳을 최대한 날려버리고 어두운 부분만 부각을 한다든가 말이다. 

### 센서의 다이내믹 레인지

디지털 카메라는 영상 센서에서 특정 시점에 받은 값을 기록하는 장치이다. 이때 센서에서 받은 값을 quantizing하게 된다. 다시 말해 정해진 수의 정보량을 가지 정보로 변형해서 기록하게 된다. 따라서 이 정보량이 허락하는 수준의 다이내믹 레인지 (가장 크게 또 작게 표현할 수 있는 값의 범위) 내로 센서가 빛을 받아들여야 한다. 이 범위를 넘어서면 아예 최대값이 되든지 아니면 최소값이 되어버린다. 즉 카메라로 빛을 담았지만 그 빛이 얼마나 강한 빛인지 그 정보를 잃어러비게 되는 것이다.

쉽게 말해서 우리가 조리개와 노출 시간을 잘못 잡아놓으면 화면이 아예 하얗게 되어버린다거나 아니면 까맣게 되어버리는 경우가 센서의 다이내믹 레인지를 넘어선 신호가 들어왔다는 말이다. 따라서 사용자 혹은 디지털 카메라의 AP가 적정 수준의 노출과 조리개 값을 결정해서 센서가 최적의 신호를 받을 수 있게 해야 한다. ISO가 여기서 하는 역할은 일종의 센서가 받은 (아날로그) 신호를 퀀타이징에 앞서서 증폭할 떄의 이득으로 보면된다. 

다시 말하자면 노출 시간이 고정된 상태에서 조리개를 최대 개방했음에도 빛이 너무 약하게 들어오고 있다면 ISO 수치 (=증폭기의 이득)를 높혀서 센서에서 보내온 값을 최적 범위에서 quantizing하게 만든다는 말이다. 이때, ISO의 값이 너무 커지면 일반적인 잡음 (=열잡음, 전기 회로에서 상시 존재함)까지 증폭이 되어 화질이 떨어진다고 보는 것이다. 사실 엄밀히 말하면 센서가 받은 빛의 양이 너무 작기 때문이다.

### 디지털 사진의 레벨

우리가 포토샵 같은데서 보는 '레벨'이라고 하는 것은 파일로 저장된 화상의 밝기를 나타낸 것이다. 점이 한 두개가 아니기 때문에 그 분포를 나타내어보여주는 것이다. 밝기에 대한 히스토그램이라고 해석하는 것이 맞을 것이다. 전체적인 밝기를 볼 수도 있고, R/G/B로 나눠서 볼 수도 있다. 어쨌든 이것들이 허용하는 범위안에서 골고루 분포가 되어있어야 잘 찍은 사진이 된다.

왜?? 우리가 찍은 어떤 사물 혹은 풍경, 인물이 담고 있는 빛의 강도의 강하고 약함이 모두 파일에 담겨지게 되었다는 말이 되기 때문이다. 필름 카메라를 쓸 때도 마찬가지다. 잘 찍은 사진이란 것은 노출과 조리개를 적당히 잘 잡아서 실재 피사체의 특성이 최대한 잘 표현되게 찍는 것이니까, 즉 다시 말해 인화지에서 표현할 수 있는 가장 어두운 것 - 가장 밝은 것의 범위 내에 내 피사체의 밝고 어두움이 모두 들어가 있어야 한다는 말이다. 물론 일부러 하얗게 날려버리거나 까맣게 만들 게 아니었다면 말이다. 노출이나 조리개를 잘못 잡아놓고 촬영하면 어떤 부분이 너무 어두워져버린다거나 아니면 하얗게 날라가기도 하기 때문이다. 그러나 이게 현상소 기술이 좋아지면서 현상소에서 이런 부분도 많이 보상을 해줬던 기억이있다.

잠시 샜는데, 디지털 카메라가 아무리 잘하고 사람이 아무리 잘 노출과 조리개를 맞추었다고 하더라도 항상 100% 원하는 대로 되진 않는다. 카메라와 촬영자의 의지가 늘상 같을 수가 없으니까 말이다.

무슨 말이냐면 이를테면 자동모드로 사람의 얼굴을 찍었다고 하자. 나는 화면 가운데에 있는 사람의 얼굴에 주안점을 두었는데, 카메라는 전체 화면의 레벨 분포에 관심을 두있던 나머지, 배경에 있는 밝은 빛을 다이내믹 레인지가 허용하는 범위에 넣으려고 일부러 조리개를 조여버렸다거나 ISO를 낮추어버렸다면, 상대적으로 사람의 얼굴은 어둡게 나오게 된다. 또 그 사람 얼굴을 표현하는 밝음과 어두움의 단계 (계조라고 말한다 흔히 레벨과 같은 말이다)가 디지털 영상이다보니 확 줄어버리게 된다. 분명히 촬영하고 나서 맘에 안드는 사진이 나왔다고 할 것이다. 배경의 빛이 관심사가 아니니 그냥 하얗게 날려버리고 얼굴에서 가장 밝은 부분과 가장 어두운 부분을 사진의 모든 다이내믹 레인지를 채우기 위해 레벨을 조정해버리면 원하는 결과가 나오게 되긴 하겠지만, 앞서 말한 대로 계조가 많이 날아가버려서 얼굴 안의 빛의 단계가 부드럽게 표현되지 못하고 계단식이 될 수 밖에 없다. 레벨의 히스토그램도 연속적이지 못하고 이산적(discrete)하게 나타나고 말이다.

이것은 그냥 간단한 얘다. 사진을 좀 찍어보면 이런 사실을 금방 깨닫게 되서 카메라를 되도록이면 자동모드로 쓰지 않으려 하고 수동모드에 가깝게 활용하게 된다. 물론 자동 모드에 비해 상당히 번거롭다. 디지털 카메라 중 고성능의 것들은 이런 것을 미리 감안해서 브라케팅이라고 해서 조리개나 노출 수치를 다르게 해서 여러 장을 찍어버린다거나, 아니면 그렇게 찍은 것들을 모두 더해서 HDR 사진을 만든다거나 하기도 한다.

그러나 더 까탈스러운 사람은 쉽게 말해 디지털 암실 작업으로 재 구성을 하게되는 것이 일반적이다.

### 컬러 그레이딩

동영상의 경우는 위에 이야기한 내용 - 디지털 사진 암실 작업 - 을 쉽게 컬러 그레이딩이라고 얘기한다. 이미 찍어놓은 디지털 영상을 원하는 레벨로 재조정하는 것이다. 요샌 카메라가 영리해서 그런 일들을 자체적으로 잘 해준다. 따라서 귀찮은 후처리를 사람이 일일히 하지 않아도 된다. 그러나 특수한 분위기를 내고 싶다거나 해서 컨트라스트나 밝기 또는 R/G/B 분포를 조정하고 싶으면 일반적으로 거치는 작업이기도 하다. 

따라서 카메라가 미덥지 못하다든가 카메라를 dynamic range를 극대화 하는 방법으로 헀다거나 (빛의 밝기를 나타내는 커브를 특수한 것을 썼다거나)하면 결과물은 당연히 내가 의도하지 않은 모양새로 나타난다. 이게 컬러 그레이딩이 필요한 이유이다. 

결과를 가지고 밝기 혹은 R/G/B 강도의 분포를 원하는 분포로 만들어주는 것 말이다.

크게 조정할 수 있는
 요소는 다음과 같을 것이다.
- 전체 분포 키우기 (곱하기 연산이라고 보면 될 것이다.)
- 전체 분포 올리거나 내리기 (상수를 더하거나 빼는 일이 될 것이다.)
- 전체 분포는 그대로 두고 평균만 올리거나 내리기 (평균을 조정하는 커브를 사용하는 일이 될 것이다.)
- custom color curve를 적용하는 일

### 옛날 동영상이나 영화의 화면을 개선하는 일

생각보다 옛날 영상들은 컬러 그레이딩에 대한 관심이 상대적으로 부족했거나 사용했던 광학 장비들의 성능이 지금처럼 좋지 못해서 기대 이하의 컬러 분포를 보여주는 것들이 아주 많다. 

우리가 흔히 예전 영상들을 접할 때 색깔이 너무 날랐다든가 (컨트라스트가 많이 떨어졌다거나) 화벨이 이상하다든가 하는 것들 모두 컬러 그레이딩 작업을 해주면 훌륭한 결과물을 얻을 수 있다. 원본을 보면 정말 수십년 전 사진이나 된 것처럼 바랜 색감이 나오는데,R/G/B 혹은 밝기 레벨만 적당히 분포를 조정해주면 어제 촬영한 듯한 훌륭한 영상이 된다는 말이다. 

옛날 드라마나 영화를 보면 어느 이유에서인지 모르지만 밝기나 색 분포가 좋지 못해서 더더욱 옛날 느낌이 난다. 컬러 그레이딩으로 색감과 밝기를 제대로 복원해서 보면 비록 수십년전 촬영한 것이지만, 옛날이란 것이 시간상으로 앞서고 있을 뿐이지 빛 바래거나 낡아빠진 것이 아님을 느끼게 된다. 무슨 말이냐면 그 때의 등장인물과 사상이 흔히 사진의 빛이 바래버리듯 흐리멍텅한 것들이 아니라 또렷한 것이었단 것이다. 그저 오래되었다면 물빠진 청바지처럼, 빛바랜 사진처럼, 낡아버린 운동화처럼 받아들여지는 경향이 있는데, 막 나온 따끈딱끈한 새것 만큼이나 소중한 가치를 지니고 있다는 것을 말하고 싶었다.
