---
title: "Guitar Amplifier S/W Modeling…2"
---
# Guitar Amplifier S/W Modeling…2


* Discretization




이전 글에서 회로를 실시간으로 시뮬레이션하는 중요한 부분에 대해서 얘기했다. 그것은 회로를 어떻게 잘게 쪼개느냐 (Discretization)이다. 앰프회로의 부분 부분을 서로 영향을 주고 받지 않는 요소들로 쪼개낼 수 있으면 그 부분들은 독립적인 객체로 만들어 다양한 회로에서 재사용도 가능할 뿐더러 연산속도를 개선하게끔 최적화도 가능하다. 




이미 언급한대로 최근의 기타 앰프 시뮬레이션의 추세는 실제 앰프 회로를 되도록 똑같이 시뮬레이션하는 방향으로 가고 있어서, 대개 1 혹은 2개의 plate follower amplifier stage에 KCL 혹은KVL을 사용하여 하나의 matrix 연산을 수행하는 접근 방식을 쓰고 있다. 이것을 흔히 K-method 혹은 DK-method라고 부른다. 




증폭단을 1개씩 혹은 2개 정도를 시뮬레이션하는 것은 적절히 타협을 하면 아주 어려운 일은 아니다. 또 그 블럭을 파라미터만 바꿔서 계속 재사용하게 되면 생산성도 매우 높아진다. 그러나, 실제로 이렇게 하면 실제 회로와 꼭 같아지지 않는다. 실제로 Discretization을 방해하는 요소는 Grid limiting current라 불리는 효과다. 




진공관이 어떻게 보면 입력 임피던스가 매우 높아서 grid로 흘러 들어가는 전류가 거의 없다는 환상적인 성질을 가지고 있긴하다. 다만 grid에 negative bias가 걸릴 때만 그렇다. 입력 전압의 폭이 커서 별 수 없이 positive bias가 걸리게 되면 grid로 전류가 흘러들어간다. 이것은 기타 앰프를 시뮬레이션할 때 매우 중요한 성질 중에 하나다. 추후 시간을 내서 이 효과가 과연 얼마나 큰 영향을 미치는지 실험해 보도록 하겠다 (아직은 나도 잘 모른다). 어쨋든 Grid limiting current 때문에 앞단의 전류가 뒷단의 입력단으로 흘러버린다. 그래서 두개의 증폭단을 쪼갤 수가 없다. 즉, 출력 전압이 높아지면 뒷단에 얼마간의 전류가 흘러들어가고, 그 때문에 전류를 끌어오는 앞단의 plate resistor에 걸리는 전압이 높아지고 결과적으로 그러한 영향이 plate current를 약간 낮추는 결과를 가져오고 등등등. 다시 말하자면 최소한 2개의 증폭단을 함께 고려해서 다음단의 grid voltage를 계산하고 다시 2개의 증폭단을 한개씩 오버랩해서 계산해준다는 방법이 되겠다. 매우 설득력이 높은 모델이다.




그런데 중요한 것은 이미 grid limiting current가 걸리는 지경에서는 신호의 찌그러짐이 일어나고 있는 상황이라 그 앞단의 plate current가 좀 떨어지더라도 뒷단의 찌그러짐에는 변화가 크게 없다. 다시 말해서 앞단에서 너무 크게 증폭이 되어서 뒷단의 입력단에서 찌그러짐이 일어나는데, 전압이 더 크지 못하게끔 앞단과 뒷단에 적절한 전류 변화가 일어난다는 것이지, 이것이 톤의 대세를 결정하는 요소는 아니다. 더군다나 Grid limiting current에 대한 어떤 구체적인 모델이 아직 정립되어있지 않다. 몇 가지 spice model을 보면 어느 전압 이상 걸리게 되면, 그 초과 전압에 비례하는 만큼 grid로 전류가 흘러버린다는 모델이다. 그 전류는 입력단에 걸리는 걸리는 전압이 증가하더라도 grid resistor에 걸려서 실제로 grid에 걸리는 전압에는 큰 변화가 없도록 하는 영향만을 줄 뿐이다. 다시말해 실제로 전압이 증가함에도 전압이 증가하지 않게끔 합리화하는 역할을 할 뿐이다.




따라서, grid limiting current을 얼마나 무시하느냐에 따라 증폭단을 최소 1개 최대 2개씩 묶어서 모델해야한다.






