---
layout: post
title: "Code signature invalid"
tags: [MacOS]
---

필요에 따라서 바이너리를 좀 수정해서 슬쩍 넘어가야 할 경우가 왕왕 있다. 지금은 AMD CPU 때문에 그렇다.

일단 디스어셈블리해서 코드를 대충 찾아보고 중요한 분기점에서 분기하지 않게 만들거나 분기 조건을 바꾸면 이게 가능하다. 사실 이게 젤 간단한 방법이다. 원인 해결은 할 수가 없으니 (커널을 패치하면 된다. 이건 좀 나중의 문제다.) 당장.

그래도 좀 괜찮은 OS라 그런지 code signature라는 것을 미리 밖에 세겨놓아서 내용물의 변경이 일어나게 되면 kernel이 이런 에러를 뿜으며 killed: 9 이란 메시지를 내보낸다. 

그러니까 패칭 자체의 성공 여부와 상관없이 앱에 박혀있는 hash id도 같이 바꿔주어야 한다. 내가 sign할 수 없으니 hash를 구할 방법이 없다. 

컴퓨터 문제인데 안 풀리면 풀릴 때 까지 매달리는 병 빨리 고쳐야할텐데..