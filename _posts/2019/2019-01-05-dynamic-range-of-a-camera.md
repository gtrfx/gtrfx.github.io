---
title: "암부노이즈/DRO/RAW.."
tags: [camera]
---

자연계의 신호는 dynamic range가 매우 크다. 거기에 비해서 디지털 세계에서 다루는 수라는 것은 범위가 한정되어있고 그 수의 크기는 돈과 직결되는 문제이기에 어떻게든 최적화를 하는 방향으로 (=엔지니어링) 돌아가게 되어있는 모양이다. 빛도 그러한 의미에서 소리와 비슷하게 linear하다기 보단 exponential한 성질을 가지고 있는 듯 한데, 이것은 linear한 수의 세계에서 digitizing하다보니 수많은 최적화의 문제가 일어나지 싶다.

그렇다고 그런 linear한 number을 이용해서 dynamic range를 넓혀보기 위해 log function을 사용해서 모든 경우를 획일적으로 대체하기엔 또 유효수자의 크기가 그렇게 많지 않다는 것이다. 그래서 look-up-table (LUT)이란 일종의 변환 함수(?)를 사용하는 모양이다. 

Sony 카메라의 DRO (Dynamic Range Optimization)은 그런 의미에서 나온 것 같다. 카메라 센서에서 받은 데이터를 적절히 분석해서 최적의 range를 찾아서 그것을 linear한 수에 mapping을 하는 작업이라고 보여진다. DRO에도 auto와 level1-5까지 선택이 가능하게 되어있는데, auto라는 것은 DRO의 level을 자기가 알아서 하겠다는 것 같고 각각의 level은 센서에서 받아진 값을 특정 linear number로 mapping할 때 최대/최소로 잡을 센서 값을 어떤 기준으로 선택하느냐와 관련된다고 본다.

그러니까, Level1-5는 입력 신호의 히스토그램과는 관련없이 최대 최소의 몇 %까지 반영하겠느냐에 따라 결정하는 방법으로 보이고 auto는 히스토그램을 고려해서 level을 결정하는 것으로 보여진다.

결과를 보면,

- DR OFF일 때는 주어진 ISO/Exposure/EV/Shutter time에 대해서 정직한 결과를 보여준다. 맞건 틀리건, 즉 과노출이 되었건 노출 부족이 되었건 그대로 JPEG으로 랜더링한다. 
- DRO Level1일 때가 가장 DR OFF와 가깝다. 사실 거의 차이가 느껴지지 않는다.
- DRO Level5 일 때는 히스토그램으로 보면 픽셀들이 갖는 밝기의 최소/최대의 값에서 가장 멀리 떨어져서 분포하게 된다. 즉, dynamic range의 부족에 의한 clipping을 최대로 보호하려는 방향으로 움직인다.

어떤 사람이 이야기하기로는 DRO level5가 가장 컨트라스트가 떨어지는 사진을 얻게 해준다고 말한다. 사실 그만큼 사진내의 점들이 갖는 최대/최소의 밝기 폭이 가장 좁아들게 된다. 양쪽으로 전부 clipping을 피하려는 방향으로 가게 되기 때문이다. 대신 하이라이트와 로우라이트 두 부분의 디테일을 가장 많이 챙기게 된다. 

어차피 RAW로 하면 DRO는 의미가 없다. DRO 작업은 RAW인 영상을 JPEG으로 만들 때 일어나니까 그러하다. 

암부노이즈를 이야기하는 것은 이 때문이다. 사실 암부 노이즈라는 것은 밝은 사진이라도 그안에 찍힌 어두운 부분에 나타난 노이즈를 의미하는데, 그것이 생기는 이유는 센서입장에서 빛이 없거나 어두운 것은 오디오로 치면 소리가 너무 작거나 없는 부분을 말하기 때문에 잡음이 더 잘 드러나게 되는 부분이 된다. 자연계에서 thermal noise라고 불리우는 white noise를 피할 수 있는 방법은 없으니까. 

그나마 RAW로 촬영하면 RAW파일이 센서로 부터 받은 신호의 모든 디테일을 전부 가지고 있게 되므로 잡음 레벨이 허용하는 한도 내에서는 센서의 다이내믹을 모두 이용할 수 있는 장점이 있는 반면 JPEG의 경우는 암부가 JPEG으로 변환될 때 DCT (discrete cosine transform)를 거치면서 
