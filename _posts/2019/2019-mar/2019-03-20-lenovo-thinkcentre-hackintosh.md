---
layout: post
title: "Lenovo Thinkcentre Hackintosh"
tags: [thinkcentre, m920]
---

일하는데 필요하다고 신청해서 받은 데스크탑에 MacOS를 올려봤다. 정확히는 10.14.3이다.

요약하면
- 설치화면 진입부터 애를 먹어서 완성하는데 3일 걸렸다. 왜? 뒤에서 설명하기로 한다.
- DSDT patching이 쉽지 않아서 지금도 sleep/shutdown이 안된다. 응??
- 나머지 기능도 성능이 100%인지는 좀 불확실하다. 

설치가 도중에 멈추거나 갑자기 셧다운이 되는 경우가 생겼는데, 이런 것은 정말 처음이다. 그렇다 이런 문제는 그냥 답이 뻔하다. 어떤 SSD를 쓰고 있는지 확인해보기 바란다. MacOS에서 호환이 안되는 SSD들이 있다. SATA를 쓰는 것은 문제가 없지만 NVMe M2 SSD들 중에 호환에 문제가 있는 것들이 좀 있다. PM981, 961 등등을 비롯해서 몇 가지 모델들이 있다. 

디바이스 제조사의 문제라기 보단 MacOS가 해당 디바이스들을 지원하지 않기 때문에 그러하다고 봐야 한다. 이런 하드웨어가 한 둘인가 어디?

이 문제를 아무도 보고한 사람이 없고, 대개 설치과정에서 뻗거나 리부팅되는 경우는 사실 해킨과정에서 흔히 일어나는 일이니까 kext라든가 EFI driver 등을 의심하게 되는데, 사실 이런 경우는 최근들어서 많이 드물어진 현상이기 때문에 예전의 하드웨어 대비 달라진 게 무엇인가 체크해보면 답이 나온다. 하지만 모든 삽질이 그러하듯이 해답을 알기 전까진 당황에서 이것 저것 해보다가 문제를 키운다거나 정답과 멀어지게 되는 경우가 있다.

내 경우는 문제의 SSD로 하루 내내 삽질하다가 지쳐서 외장 하드에 설치해보다가 알게 됐다. 외장하드를 쓰더라도 가끔씩 셧다운이 되긴 했지만 (문제의 NVMe를 떼어내지 않았기 때문이다) 설치도 완료되고 부팅도 가능했다. 오직 설치가 중단되는 경우는 NVMe SSD에 설치할 때만이었다.

SMBIOS에서 모델을 무엇으로 설정하느냐에 따라 화면의 껌뻑임이 발생한다. 신기하게도. 그러하다. iMac18,3으로 설정하면 문제를 일으켜서 어쩔 수 없이 Macmini로 설정하니까 안정되게 동작하고 있다.

i7 8700인데 생각보다 video encoding이 빠르지 않다. 오히려 내가 가지고 있는 구형의 i7 4770R보다 느리다. 느리다는 것이 결과물이 느리다는 것이고 core를 2개밖에 사용하지 않는다. 4770R은 모든 코어를 전부다 사용하는 것에 반해서.

물론 multithread로 프로그래밍하면 12개 thread 이상 벌리는 경우 core를 full로 쓸 수 있고 이때 우렁찬 팬소리도 들린다. 생각보다 팬의 성능은 나쁘지 않아서 모든 core를 풀가동하더라도 과열로 clock을 떨구거나 하진 않는 것 같다. 