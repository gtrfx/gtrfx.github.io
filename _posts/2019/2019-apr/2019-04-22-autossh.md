---
layout: post
title: "AutoSSH"
tags: [autossh]
---

ssh를 사용하면 생각보다 끊어지는 일이 많다. 특히나 터널링 기능을 사용하면 더 그렇다. 그러니까 그 터널을 자주 사용하면 갑작스럽게 끊어지는 일을 경험하기 쉽지 않지만, 사용 빈도가 드문 경우에는 끊어져있는 것을 자주 경험하게 된다. 

그 때문인지 autossh라는 어플리케이션이 있다. 쉽게 말해 ssh가 끊어지면 스스로 알아서 재접속해주는 그런 유틸리티라고 보면 된다.

사용방법은 ssh와 거의 같지만 생각만큼 잘 돌지 않는다. ssh 터널을 하는 경우에는 끊어질 때 그냥 단지 ssh를 터널링을 다시 회복시켜주는 것만으로 끝나게 되는 게 아니다. 터널이 망가지면서 엉망이 된 다른 프로세스들도 살려내야 한다. 

결국, ps로 내가 올린 ssh job이 멀쩡히 있는지 수시로 체크해서 죽었으면 다시 실행하는 방법 만큼 확실한 게 없단 결론에 이르게 된다.

그렇다. 짧은 스크립트 하나 짜놓고 cron으로 주기적으로 실행하는 방법이 가장 좋았다. 단순히 ssh 말고 다른 일도 같이 시켜야 되니까 이 방법이 답이다.

이것도 일종의 '자동화'인데, 여기에 길들여지면 시스템이 한 번 죽거나 엎어졌을 때 (파일 시스템이 한꺼번에 날아가거나 하는 경우) 엄청난 불편을 겪는다. 사실 이 불편은 그동안 편하게 지냈던 것에 비하면 얼마 안되는 불편이긴 하지만 그만큼 사람이 편해지면 그것에 얼마나 빨리 길들여지고 그 정도를 빨리 잊게 되는가 알게 된다.

1-2년전의 내가 경험하는 세상에 비하면 지금은 정말 말도 못하게 편해졌다. 나 혹은 타인에 의해서 자동으로 관리되고 있는 일들이 한 두 가지가 아니다. 

