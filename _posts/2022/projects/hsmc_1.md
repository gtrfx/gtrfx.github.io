---
title: "행렬 연산기를 만들어볼까?...1"
tags: [matrix, linear algebra]
layout: post
author: "Keith"
---

## 이거 왜 만드나?

용도는 다음과 같다.

- MATLAB처럼 돌아가는 하드웨어가 필요하다.
- MATLAB처럼 수 많은 연산이 돌아야할 필요는 없다.
- 정해진 연산을 하드웨어 자원을 최대한 활용해서 최대한 빠르게 해야한다.

개인적인 목표는

- 최근의 고속 연산 장치의 성격을 이해하기
- GPU (Metal/CUDA)를 범용 연산 작업에 활용하는 기반 지식 쌓기

## 어떻게 하나

### 하드웨어 설계하기

별거 없다 스펙 결정하고 블록 다이어그램 그리고 wiring하면 된다. 나머지는 verilog로 마무리하고 시뮬레이션만 좀 해서 원하는 대로 설계되었나 체크 해주면 된다. 하드웨어는 간단한 편이 전력소비나 검증차원, 또 면적대 연산능력 측면에서 유리할 수 밖에 없다. 다만 내부에 메모리가 증가하는 것은 최대한 막아야 한다. 면적을 늘리는데 크나큰 기여를 하기 때문이다. 연산 블록의 개수를 늘이더라도 temporary memory의 사용은 최소한으로 하는 것이 무조건 이득일 수 밖에 없다. 

### 소프트웨어 설계하기

대신 소프트웨어가 복잡해질 수 밖에 없다. 기능이 늘어날 수록 소프트웨어가 복잡해지는 편이 검증이라든가 사후 문제 (버그 발견시 대처)가 유리해질 수 밖에 없다. 

소프트웨어가 하는 일들은 대부분 다음과 같다.
- (거의 MATLAB 수준의) 상위 연산 기능 수행
- 하드웨어에 가까운 저순위의 연산 기능 수행
- 하드웨어 엔진의 에뮬레이션
- 하드웨어 엔진의 통계 정보 수집
- 하드웨어 엔진의 효율을 최적화하는 컴파일러
- ...

결국 작업은 풀어내야 하는 문제들을 최대한 상위 개념에서 접근해서 수행해보고 그것을 하위 수준 개념으로 쪼개서 생각해보고 마지막으로 하드웨어 수준의 저차원에서 돌려보는 것이다. 여기서 통계정보를 수집해서 하드웨어 설계를 수정하고 소프트웨어를 수정하고 하는 iteration을 거듭하는 과정에서 좋은 물건이 나오게 된다.

