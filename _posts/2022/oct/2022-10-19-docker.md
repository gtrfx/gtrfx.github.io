---
title: "드디어 docker를 제대로(?) 쓰게 되었다.."
tags: [docker]
---

docker를 꽤 오랜동안 사용해오고 있지만, 대부분 docker를 사용한 이유는 옛날에 나온 linux distro를 사용하기 위해 이미지를 받아와서 그 위에 내게 필요한 이것 저것을 설치해서 사용하는 정도에서 머물렀는데, 결국엔 편리함에 굴복해서 누군가 만들어놓은 컨테이너를 받아와서 쓰는 단계에 이르렀다.

IKEV2를 사용하는 strongswan을 설치하느라 시간까먹고 있느니 그냥 docker를 쓰자 했는데, 거의 내가 소비할 시간의 1/10도 안되는 시간으로 쉽게 설치가 끝났을 뿐더러 자질구레한 쓰레기들이 남지 않으니 그냥 native로 설치하는 것보다 낫구나 싶었다.

사실 docker container를 불러다 쓰면 해당 OS의 이미지가 파일 시스템을 먹고, 또 실행하는데 몇 단계가 추가되는 것만 빼면 뭔가를 설치해야하는 부담감/머리아픔은 크게 줄일 수 있다. 아마도 그 때문에 docker 세계가 이렇게 흥한 것이기도 하고.

나는 몹시 엣날 사람이라 내가 사용하는 daemon이나 service들은 내가 build해서 또 셋업해서 올려야 제맛이라고 생각을 하는데, 사실 어린 친구들은 그런 골치 아픈 거 할 이유도 없고 그렇게 낭비할 시간도 없다고 생각해서 docker container를 쉽게 가져다 쓰는 것 같다. 세상이 바뀐 거니까 그렇게 따라가야지 맞는 것이겠지 싶다가도 쓸데없는 본능이 발동하면 또 native 설치를 감행하고 그러는 거다.

사실 요새 alpine linux는 워낙에 덩치가 작아서 간단한 기능을 수행하는 docker container에 넣고 쓰긴 그만이다. 이것은 대충 들여다보면 libreswan에 이런 저런 설치용 스크립트를 잘 만들어놓은 것인데, MacOS나 iOS에서 IKev2를 쓰자면 이보다 더 좋은 방법이 없지 싶을 정도로 좋다. 더구나 arm용 컨테이너도 잘 되어있어서 좋고.

사실 OpenWRT로 아예 router에 넣어서 쓰려고 했었는데, router의 CPU는 docker를 돌릴만 할 수준이 되지 못해서 Rpi4에 넣고 쓰는데 시스템 부하도 별로 없는 듯하고 쓸만하다. 

다만 문제를 하나 지적하자면 VPN으로 잡히는 host의 address가 local의 address map에 잡히는 녀석이 아니라 bonjour가 안 듣는다는 거다. 이를테면 iTunes용 library에 접속을 못하는 거지. 물론 강제로 밀어넣으면 되긴 한다만. 아직 다 써보지 못해서 알 수는 없지만 나름 요긴할 것으로 본다.

