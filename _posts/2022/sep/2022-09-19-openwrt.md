---
title: "openwrt은 함부로 건드리지 말자..ㅠ"
tags: [i2pd, openwrt]
image: https://cdn.cnx-software.com/wp-content/uploads/2022/09/OpenWrt-22.03.jpg?lossy=1&ssl=1
layout: post
author: "Keith"
---

OpenWrt는 사실 매우 좋은 open firmware인데 이걸 설치해놓고 가끔씩 maintenance 같은 것을 할 땐 주의를 하는 것이 좋다. 그러니까 큰 맘 먹고 maintenance를 해야지 그냥 좀 건드려볼까? 하는 맘으로 손을 댔다간 나처럼 낭패를 보기 십상이다.

그래도 매우 다행스러운 것이 firmware의 형태로 되어있기 때문에 혹여 현재 돌아가고 있는 firmware 혹은 firmware 설정에 문제가 생겼더라도 곧바로 설치했던 이미지 그대로 복원이 가능하기 때문에, 또 과거의 설정 같은 것을 백업 받아두었다면 완벽 복원까지 가능하다. 물론 내 경우 그랬다는 것은 아니고.

일단 내 경우를 예로 들면, package를 마지막으로 업데이트 한 것이 대략 1년 정도 전이고, 또 그랬다고 하더라도 일부의 패키지를 새로 설치하거나 업데이트 하는 것이 가능하지 않을까 생각했는데, 실제로는 그렇지 않았다. 하필이면 가장 중요한 app인 opkg (pacman/yum/apt 같은 앱이다)를 건드리는 바람에 어쩔 수 없이 전부 갈아 엎게 되었다.

분명히 어떤 패키지 하날 업데이트하다가 문제가 생겼다거나 하면 firmware reset이 가능하다. 그러니까 원래 라우터의 소프트웨어 그대로 복원하는 게 아니라 최근에 정상적으로 설치됐던 패키지 그대로 복원하는 것이다. 

firstboot 이라는 명령을 써도 되고 Luci 상에서 reset firmware를 선택해서 초기화하면 된다. 정말 매우 편리하다.

물론 이 상태가 되면 나머지는 스스로 알아서 설정해야 하는 문제가 있지만 라우터 상에서 주는 자유도 뿐 아니라 라우터의 여분의 화력을 이용해서 다양한 애플리케이션을 구동시킬 수 있기 때문에 분명히 라우터 그 제품 그대로 쓰는 것 보다 좋다. 더구나 일반적으로 잘 알려진 linux의 대표적인 서버 데몬들을 굴리기 때문에 늘상 최신 소프트웨어의 상태로 유지할 수 있고 수많은 contributor들의 도움으로 그 어떤 모델이든 수시업데가 가능하단 것이다. 

난 tplink의 비교적 오래된 저가 모델을 사용하고 있는데, 최근에 구입한 ASUS의 라우터에 비하면 여러 가지로 성능이 형편없지만 firmware의 성능이나 가벼움, 자유도는 사실 비할 바가 못된다.