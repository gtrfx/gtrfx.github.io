---
title: "개인용 인터넷 게이트웨이 프로젝트..."
tags: [raspberrypi4]
layout: post
author: "Keith"
---

오랜만에 rpi4를 가지고 놀다보니 기왕이면 이걸로 인터넷 게이트웨이를 만들어버리면 좋겠다라는 생각을 하고 이런 저런 테스트를 하다보니 저녁시간이 홀라당 날아갔다. 대충 확인한 것은 다음과 같다.

- SSD를 붙여봤으나 USB3를 통해서 소통해야되다보니 속도가 떨어져서 고속의 SDCard가 차라리 낫다는 결론을 내림.
- 일단 USB-C 복합 허브를 붙여놓으니 ethernet interface가 인식되는 것을 확인했다.
- pihole이 잘 설치되는 것을 확인했다. DHCP는 OpenWRT만 못하다는 결론을 얻음.
- arch linux arm를 설치해서 이것 저것 실행하는 것은 편리하지만 OpenWRT처럼 하나의 suite가 되어서 동작할 수 없고 설정해야 할 것이 대단히 많아서 전체적인 기능을 완성시키는 것에 있어서는 OpenWRT만한 게 없다라는 결론을 얻음.

많은 시간을 사용했지만 사실 OpenWRT를 설치하는 것보다 못하다는 결론을 얻었다. 

문제는 OpenWRT를 설치하게 되면 OS의 선택의 폭이 좁아서 같은 머신에서 다른 일을 수행시키기가 쉽지 않다. 이를테면 OpenWRT를 사용하면 PiHole처럼 통계를 얻어낼 수가 없고 내가 원하는 어플리케이션을 내가 원하는 바대로 실행시킬 수가 없다. 그렇다고 OpenWRT를 쓰지 않으면 편리하게 방화벽이나 라우터 세팅을 바꿀 수가 없고 모두 수동으로 해결해야 한다.

결국 어쩔 수 없이 OpenWRT를 설치한 호스트를 따로 두고 다른 애플리케이션을 돌리는 호스트를 또 따로 두어야 하므로 낭비가 아닐 수 없다. 또 한가지 아이디어는 Docker로 OpenWRT를 굴리는 것인데, 이 역시 그다지 쉬워보이지 않는다.

결국, wifi router에 OpenWRT를 설치해서 그냥 gateway/firewall로 쓰고 여기서 못 하는 일은 raspberry pi를 쓰는 것은 변하지 않았는데, 이런 저런 시도를 한다고 하루를 꼬박 날림. 제대로 완성도 못하고. 그렇게나 OpenWRT가 나름 효율적이고 훌륭하다는 말이 되네ㅠ

