---
title: "네트워크 카드 여러 개 쓰기.."
tags: [network]
layout: post
author: "Keith"
---

대개 ethernet과 wifi가 기본 장착인 컴퓨터가 흔한 시절이니까 이걸 예로 들면 좋을 것 같다.

두 개의 망이 동일한 것이라면 ethernet의 속도가 분명히 빠를테니까 ethernet을 우선으로 사용하면 될거다. 그런데 어떻게 우선으로 사용하나?

Mac 같으면 network 설정에서 device의 service order를 조정하면 된다. linux 같으면 routing table에서 default gateway의 metric을 조정하면 된다.

사실 말이 쉽지 이거 하려면 기존의 routing table을 없에고 새로 만들어야 되기도 하거니와 명령을 주는 utility가 여러 개라 나한테 맞는 걸 골라서 써야 한다.
만일 리모트로 이런 짓을 하다가 조금이라도 실수하면 괜히 멀쩡한 접속도 날려먹고 그 컴퓨터를 네트워크 상에서 고립되게 만들 수도 있으니까 조심해서 해야 할 일이기도 하고.

또 한가지 경우가 두 개의 네트워크 카드가 서로 다른 네트워크에 물려있는 경우이다.

그러니까 하난 인터넷이 되는 망과 연결되어있고 하난 인트라넷에 연결되어있는 경우이다. 그러니까 회사 네트워크 같이 외부의 접속을 피해서 돌아가야되고 많은 ip address를 풍부하게 쓸 수 있어야 되는 경우에 대개 ethernet은 intranet과 연결되어있고 wifi는 인터넷 접속이 가능하도록 되어있고 인트라넷에는 접속할 수 없게 되어있다.

좀 웃긴게 인트라넷이 인터넷 접속이 안된다고 하더라도 전부 다 막아놓은 것은 아니고 이를테면 OS update를 제공하는 사이트라든가 중요한 메시지를 전송하는 사이트 (이를테면 iMessage 관련) 이런 곳들은 뚫려있다는 거다. 대개 OS update를 하면 가져와야 할 데이터의 양이 상당하니까 기왕이면 ethernet으로 받고 싶고 일반적인 인터넷 접속은 인트라넷을 타고 갈 수 없으니까 어쩔 수 없이 wifi를 타고 가야된다.

이 경우 주소대역별로 어떤 네트워크 카드를 사용해야 할지, 즉 어떤 게이트웨이를 이용해야 할지 여러 가지 방법 중 하날 택해야 한다.

즉,
- 주소 대역 별로 복잡하게 routing table을 만들어서 어떤 NIC를 골라 쓸지 결정한다.
- 내부에 proxy를 두고 특정 주소/도메인에 따라 proxy를 거쳐가야 할지 아닐지를 결정한다.

proxy를 쓰는 경우에는 UDP는 대개 지원하지 않기 때문에 문제가 좀 복잡해진다. 다시 말해 주소대역별로 어떤 gateway를 쓸지 routing table을 만드는 방법 말고 다른 방법이 없는 거다.

