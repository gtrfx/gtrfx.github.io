---
title: "내 홈서버..."
tags: [life]
layout: post
author: "Keith"
---

Raspberry pi4에 잡다한 일을 해주는 홈서버를 두고 있다. 

꽤나 오래 운영 중인데 예전엔 밖으로 포트를 몇 개 뽑고 임시 dns 같은 곳에 걸어두기도 했었는데, 두어번 해킹을 당한 적이 있다.
대충 파악한 바로는 내가 알만한, 내가 드나드는 사이트의 사람이 아닐까 싶은 출처의 주소에서. 얼마나 털어갔는지는 알 수 없지만 홈서버를 털리면 
꽤나 피해가 심각하다. 나 같은 경우에는 한 대의 홈 서버가 우리 집에서 일어나는 거의 모든 것들을 관할하고 있기에 더더욱 그렇다.

대개 외부에서 어딘가를 칩입하더라도 그 침입자의 수준이 어떠하냐에 따라서 침입한 호스트가 어떤 역할을 하고 있는지 확실히 알 수 있지만, 대개 그렇지 못하다면 
데이터를 가져가거나 몇 가지 기능을 못 쓰게 한다거나 백도어를 뚫거나 하는 짓들을 한다. 사실 백도어를 뚫어서 숙주로 만들어버리는 일이 일반적이라고 해야할거다.
두고두고 이것 저것 뽑아먹으면서 이것 저것 시간을 두고 훑어갈 수 있으니까. 

그 일이 있은 후로는 2단계를 거쳐가도록 구조를 살짝 바꿨지만, 어떻게든 포트를 한 두 개라도 뚫어놨다면, 그 포트가 어떤 포트이든, 침입을 당할 가능성은 언제든지 있다고 본다. 

그외에 dns, vpn, samba, nfs, owntone도 돌고 그외에도 꽤 많은 프로세스가 돌아가고 있다. cron으로 주기적으로 관리해줘야 하는 것들도 프로세스가 죽으면 다시 살려놓아서
언제든 서비스가 기동할 수 있도록 하고 있다. 다소 아쉬운 것은 raspberry pi 4라 ethernet speed가 제법 낮다는 점. 실제로 1GbE이지만 성능의 한계 때문인지 속도가 절반도 나지 않는다.
또 비용을 절감하기 위해서 OS를 HDD에 올려놓고 돌리고 있어서 좀 느린 편이지만 집에서 이 정도는 충분히 감수할 만하다.

여기에 home assistant를 붙여주고 호환되는 기기들을 붙여주면 여러 가지 홈 오토메이션 작업을 할 수 있을 것 같은데, 막상 해보려면 마땅한 장치가 잘 없고 여러 가지로 꼼수가 필요해서 아직은 하지 못하고 있다. 

아직 이런 경우에 딱 걸맞는 좋은 SoC를 발견하지 못했다. 새로 나온 raspberry pi 5도 좋아보이긴 하지만 4와 차이가 크게 없을 것으로 보여지고, 아예 router의 성능이 좀 좋아져서
별도로 raspberry pi를 굴릴 게 아니라 router에서 남아도는 computing power를 활용하고 싶은 생각이 더 크다.